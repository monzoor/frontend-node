!function($,validate){$.fn.yearValidation=function(options){function hideError(field){_constraints.day.presence=_constraints.month.presence=!1,field.parents().eq(1).removeClass("error_active");var errorMessage=field.parent().next();errorMessage.remove()}function showError(field,message){var $error=null;errorPlace=$(field.selector),hideError(errorPlace),$error=$('<span class="error">test</span>'),errorPlace.parents().eq(1).append($error).addClass("error_active"),$error.html(message)}var $fields={year:this.find("#year"),month:this.find("#month"),day:this.find("#day")},errors=null,_constraints={year:{length:{minimum:4,maximum:4},numericality:{onlyInteger:!0,greaterThan:1900,lessThanOrEqualTo:(new Date).getFullYear()}},month:{length:{minimum:1,maximum:2},numericality:{onlyInteger:!0,greaterThan:0,lessThanOrEqualTo:12}},day:{length:{minimum:1,maximum:2},numericality:{onlyInteger:!0,greaterThan:0,lessThanOrEqualTo:31}}};$(this).on("submit",function(e){function dobProvided(){return!validate.isEmpty(data.day)||!validate.isEmpty(data.month)||!validate.isEmpty(data.year)}var data={year:$fields.year.val(),month:$fields.month.val(),day:$fields.day.val()};if(dobProvided()?(_constraints.day.presence=!0,_constraints.month.presence=!0,_constraints.year.presence=!0):(_constraints.day.presence=!1,_constraints.month.presence=!1,_constraints.year.presence=!1),data.year%4===0&&2==data.month?_constraints.day.numericality.lessThanOrEqualTo=29:2==data.month?_constraints.day.numericality.lessThanOrEqualTo=28:_constraints.day.numericality.lessThanOrEqualTo=31,errors=validate(data,_constraints)){for(var name in errors){var message=errors[name][0],field=$fields[name];showError(field,message)}return!1}return!0}),$(".edit__inputs").find("input").on("keyup",function(){hideError($(this))})}}(window.jQuery,window.validate),function($){var $avatarFile=$("#photoInput"),$form=$("#profileDetailsForm"),deleteAccount=$("#deleteAccount").overlay(),verifyPhone=$("#verifyPhone").overlay();$avatarFile.on("change",function(e){$(this).parent().addClass("loading"),$form.submit()});var hash=window.location.hash;"#verifyphone"==hash&&verifyPhone.open(),$("#sureDelete").on("change",function(){this.checked?$("#delete-account-btn").removeAttr("disabled").removeClass("disable"):$("#delete-account-btn").attr("disabled","disabled").addClass("disable")}),$("#delete-account-btn").on("click",function(e){e.preventDefault(),deleteAccount.open()}),$("#genderLevel").html($("#genderSelection option:selected").text()),$("input").on("focus",function(){$(this).removeClass("input--error")}),$(".edit__item").on("click",function(){var $editItem=$(this),textElement=$(this).children().first().html();$(this).addClass("edit__item--active"),$(this).find(".edit__inputs input, .edit__inputs select").focus(),$(this).find(".edit__inputs input").val(textElement),$(".profile .btn-block").css("display","block"),$(".edit__inputs input").on("blur",function(){null===$(this).val()?($(this).parent().prev().eq(0).html(textElement),$(".profile .btn-block").hide()):$(this).parent().prev().eq(0).html($(this).val()),$editItem.removeClass("edit__item--active")}),$(".edit__inputs select").on("blur",function(){var e=document.getElementById("genderSelection"),text=e.options[e.selectedIndex].text;text===textElement?$(".profile .btn-block").hide():$(this).parent().prev().eq(0).html(text),$editItem.removeClass("edit__item--active")})}),$("#profileDetailsForm").yearValidation()}(window.jQuery);